新项目迁移数据库

创建超级用户 python manage.py createsuperuser

127.0.0.1/admin

django 管理后台



### 主体流程

- 班级申请
  - 需填写班级相关信息
  - 同时注册班级管理员账号
  - 后台添加到班级数据库, 激活为false
- 超级用户同意
  - 超级用户对申请的班级进行同意
  - 超级用户有权限删除注册班级
  - 超级用户在后台将班级激活设为false, 此时班级建立同时管理员可登录
- 班级成员注册
  - 注册时选择班级 填写班级学号, 姓名, 密码(以学号进行登录)
  - 后台中将成员信息添加数据库, 将用户可所在班级进行绑定
- 班级成员登陆
  - 填写选择班级, 填写学号, 密码, 选择是否记住密码登录
  - 登陆后可查看本班公告及作业信息
  - 点击作业链接进行提交作业
  - 后台接收班级作业放入  ../upload/班级/作业/文件夹下
  - 文件命名方式--学号_ 姓名 _文件名称
- 班级管理员登陆
  - 可发布公告, 作业(并填写作业介绍)
  - 在后台管理页面点击作业可查看已经提交的作业
  - 可点击下载(后台对文件夹压缩, 下载), 删除某个人的文件, 删除整个儿作业(清除文件夹)



注: *为简化文件管理 提交的作业不存入数据库, 在文件查询时遍历文件夹下文件,显示名称, 用户查询时查询相同的学号开头的文件, 删除同理*



### 数据库设计

---

- 班级表
  - 班级名称
  - 班级公告
  - 班级管理员用户名
  - 班级管理员密码(md5)
  - 是否激活

---

- 成员表
  - 姓名
  - 所属班级(外键, 指向班级)
  - 学号
  - 密码(md5)





### 架构分块

- 用户模块
  - 普通用户的登陆, 注册, 主页
  - 上传
- 超级用户模块
  - 超级管理员管理班级
  - 普通管理员管理, 对作业进行增删改查下载等
- 前端页面实现
  - 写过, 有部分代码, 可迁移



localhost/user/login -- 登陆
- 用户名
- 密码
- 班级

成功跳转主页, 失败报错

localhost/user/regist -- 注册

​			

localhost/user/main -- 主页

localhost/user/upload



